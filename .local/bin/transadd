#!/bin/sh

categories="Downloads\nFilms\nMusic\nSerials\nBooks\nCustom"

folder_prefix="$HOME"
default_folder="`xdg-user-dir DOWNLOAD`"
folder=""

case $(echo -e $categories | dmenu -i -p "Option:") in
    Films)   folder="`xdg-user-dir VIDEOS`" ;;
    Music)   folder="`xdg-user-dir MUSIC`" ;;
    Serials) folder="$folder_prefix/serials" ;;
    Books)   folder="$folder_prefix/books" ;;
    Custom)  folder="$HOME/`dmenu -p "Enter path in '$HOME':" <&-`" ;;
    *)       folder="$default_folder" ;;
esac

[ -z "$folder" ] && notify-send "Empty path" && exit 1
[ ! -d "$folder" ] && mkdir -p "$folder"

pgrep -x transmission-da || (transmission-daemon && notify-send "Starting transmission daemon..." && sleep 3)
transmission-remote -a "$@" -w "$folder" && notify-send "ðŸ”½ Torrent added" "To: $folder"
