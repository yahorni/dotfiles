# vim:ft=bash:ts=4:sw=4:sts=4:fdm=marker:fdl=0:cms=#\ %s
# marks: ~/.local/share/lf/marks
# icons: ~/.config/lf/icons

## options
set autoquit true
set drawbox
set ifs "\n"
set incsearch
set mouse
set period 1
set scrolloff 5
set shellopts '-eu'
set tabstop 4
set nohistory
set icons

## file previews
set previewer 'fm-preview.sh'
set cleaner   'fm-clear.sh'

## commands
cmd touch %touch "$(echo $* | tr ' ' '\ ')" && lf -remote "send $id load"
cmd mkdir $mkdir -p "$(echo $* | tr ' ' '\ ')" && lf -remote "send $id load"

## mappings
map s $$SHELL
map D delete
map d cut
map p paste
map Q quit
map <esc> clear
map <enter> open
map <delete> delete
map r reload
# disable default mappings
map w
map c
# enable mouse
map <m-up> up
map <m-down> down
map <m-1> open
map <m-2> updir
# rename
map C push A<c-u>           # new rename
map A :rename; cmd-end      # at the very end
map I :rename; cmd-home     # at the very beginning
map i :rename               # before extension
map a :rename; cmd-right    # after extension
# files
map za set hidden!
map zi set info size:time

## mappings (external utilities)
# edit file
map e $$EDITOR "$f"
# new file
map cf push :touch<space>
# new directory
map cd push :mkdir<space>
# open with xdg-open in separate process
map L  $xdg-open "$f" &
# add/remove executable rights
map xa $chmod +x $fx
map xr $chmod -x $fx
# open with ...
map o push !<space>$f<left><left><left>
# show pictures (package: nsxiv)
map xp $nsxiv -t . &
# use file for drag'n'drop (package: dragon)
map xg $setsid dragon "$f" &
# make zip archive (package: zip)
map xz $zip -r "$f.zip" "$(realpath -s --relative-to=. $f)"
# make tar.gz archive (package: tar)
map xt $tar -czvhf "$f.tar.gz" "$(realpath -s --relative-to=. $f)"
# unpack archive (package: atool)
map xu $aunpack "$f"
# bulk rename (package: moreutils)
map cw $vidir $fs
# encrypt/decrypt (package: gpg)
map xe $gpg --yes -c "$f"
map xd $gpg --output "$(basename $f .gpg)" --decrypt "$f"

## mappings (custom scripts)
# set wallpaper
map xw $set-wallpaper.sh "$f"
# muslib management
map xc $muslib.sh copy "$f"
map xl $muslib.sh link "$f"
map xU $muslib.sh unlink "$f"
